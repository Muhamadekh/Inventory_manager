{% extends 'layout.html' %}
{% block content %}
    <!-- Buttons -->
    <div class="button-container">
      <a class="button active">Stock</a>
      <a href="{{ url_for('stock_out', store_id=store.id)}}" class="button">Transfer</a>
      <a href="{{ url_for('stock_in', store_id=store.id)}}" class="button">Receive Stock</a>
      <a class="ml-4">Store Name: {{store.store_name}}</a>
      <a class="ml-4">Date:{{date}}</a>
      <div class="float-right">
          <a href="{{ url_for('view_stores')}}" class="button">Back</a>
      </div>
    </div>

     <!-- Table with spreadsheet-like design -->
    <table class="table table-hover table-condensed">
      <thead>
        <tr>
          <th>Item Name</th>
          <th>Item Quantity</th>
          <th>Cost Price</th>
          <th>Selling Price</th>
          <th>Item Value</th>
          <th>Date Received</th>
          <th colspan="2">Item Status</th>
        </tr>
      </thead>
      <tbody>
        {% for product in store_items %}
          <tr>
              <td>{{ product.item.item_name }}</td>
              <td class="text-right">{{ "{:,}".format(product.item_quantity) }}</td>
              <td class="text-right">{{ "{:,.2f}".format(product.item.item_cost_price) }}</td>
              <td class="text-right">{{ "{:,.2f}".format(product.item.item_selling_price) }}</td>
              <td class="text-right">{{ "{:,}".format(product.item_value) }}</td>
              <td class="text-right">{{ product.date_added.date() }}</td>
              <td class="text-right">{{ product.stock_status }}</td>
              <td class="text-center"><a href="{{ url_for ('edit_store_stock', stock_id=product.id) }}">Edit</a></td>
              <td><a data-toggle="modal" data-target="#deleteModal"><span class="text-danger">Delete</span></a>
                <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModal" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title font-italic text-danger" id="deleteModalLabel">Do you want to remove this stock?</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <a href="{{ url_for('delete_store_stock', item_id=product.id, store_id=store.id)}}">
                            <button type="button" class="btn btn-danger">Delete</button></a>
                      </div>
                    </div>
                  </div>
                </div>
              </td>
          </tr>
        {% endfor %}
          <tr>
              <td colspan="5" class="text-right"><strong>Total Stock Value</strong></td>
              <td class="text-right"><strong>{{ "{:,}".format(total_stock_value)}}</strong></td>
              <td colspan="3"></td>
          </tr>
      </tbody>
    </table>
{% endblock content%}